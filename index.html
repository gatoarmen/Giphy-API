<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <title>Giphy</title>
    <style type="text/css">
        button,
        div,
        form,
        input {
          margin: 10px;
        }
      </style>
</head>



<body class="container">

  <h1>Giphy</h1>

  <div class="row">

      <div class="col-md-6 panel panel-default ">   

          <div class="panel-heading">      
<h2>Instructions</h2>
</div>

<div class="panel-body">
    Click on the buttons to display Gifts from the Giphy API. <br>
    Add more buttons to play with.<br>
    Click on the images to stop the animation.
  </div>


</div>

    <div class="col-md-4">
      <!-- Buttons will Get Dumped Dere -->
  
      <div id="animal-Buttons"></div>
  
       
      <form id="animal-form">
        <label for="animal-input">Add an Animal</label>
        <input type="text" id="animal-input">
        <br>
  
        <!-- Button triggers new animal to be added -->
        <input class='btn btn-info' id="add-animal" type="submit" >
  
      </div>

    
    </div>

    <div class="col-md-6">
      <!-- Animals will get dumped here -->

     <div id="animals-view"></div>

    </div>
   
    
  
  




      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <script type="text/javascript">
       
        // Initial array of movies

        var animals = ["Dog", "Cat", "Panda", "Elephant"];
  
        // Function for displaying movie data
        function renderButtons() {
  
          // Delete the content inside the movies-view div prior to adding new movies
          // (this is necessary otherwise you will have repeat buttons)
  
         $('#animal-Buttons').empty();
          // Loop through the array of movies, then generate buttons for each movie in the array
  
          for ( var i = 0; i < animals.length; i++) {
  
            var a = $('<button>');
  
            a.addClass('animal');

            a.addClass('btn btn-primary')
  
             a.attr("data-name", animals[i]);
  
             a. text(animals[i]);
  
              $("#animal-Buttons").append(a);
          }
        }

        // Calling the renderButtons function to display the intial buttons
        renderButtons();


           // This function handles events where one button is clicked

        $("#add-animal").on("click", function(event) {
        event.preventDefault();

        // This line grabs the input from the textbox
        var animal = $("#animal-input").val().trim();

        // The movie from the textbox is then added to our array
        animals.push(animal);

        // Calling renderButtons which handles the processing of our movie array
        renderButtons();

      });

          
      // Generic function for displaying the Gifts
      $(document).on("click", ".animal",  function displayAnimalInfo() {

        let key = 'UEUEJxjpyHy0Wmpa4JOQUZQSc3kOEjvd'
        var animal = $(this).attr("data-name");
        var queryURL = "https://api.giphy.com/v1/gifs/search?api_key=" + key  + '&q=' + animal + '&limit=10';
        console.log(queryURL)

        $.ajax({
        url: queryURL,
        method: "GET"
        }).then(function(response) {

            console.log(response)

              // storing the data from the AJAX request in the results variable
          var results = response.data;

// Looping through each result item
for (var i = 0; i < results.length; i++) {

  // Creating and storing a div tag
  var animalDiv = $("<div>");
animalDiv.addClass("col-md-6")
  // Creating a paragraph tag with the result item's rating
  var p = $("<p>").text("Rating: " + results[i].rating);

  // Creating and storing an image tag
  var animalImage = $("<img>");
  // Setting the src attribute of the image to a property pulled off the result item
  animalImage.attr("src", results[i].images.fixed_height.url);
  animalImage.attr("data-still", results[i].images["480w_still"].url);
  
  animalImage.attr("data-animate", results[i].images.fixed_height.url);
  
  animalImage.attr("data-state", "still");
  

  // Appending the paragraph and image tag to the animalDiv
  animalDiv.append(p);
  animalDiv.append(animalImage);

  // Prependng the animalDiv to the HTML page in the "#gifs-appear-here" div
  $("#animals-view").prepend(animalDiv);

        $("img").on("click", function() {
      // The attr jQuery method allows us to get or set the value of any attribute on our HTML element
      var state = $(this).attr("data-state");
      // If the clicked image's state is still, update its src attribute to what its data-animate value is.
      // Then, set the image's data-state to animate
      // Else set src to the data-still value
      if (state === "still") {
        $(this).attr("src", $(this).attr("data-animate"));
        $(this).attr("data-state", "animate");
      } else {
        $(this).attr("src", $(this).attr("data-still"));
        $(this).attr("data-state", "still");
      }
    });


        };
        
    });
    
       } );
      
      </script>
</body>
</html>